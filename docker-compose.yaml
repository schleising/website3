version: "3.11"

services:
  nginx:
    build: nginx
    ports:
      - 8010:80
      - 8011:443
    depends_on:
      - fastapi
    volumes:
      - ./website/static:/static:ro
      - socket_volume:/socket:rw
    restart: always

  fastapi:
    build: fastapi
    volumes:
      - ./website:/app:ro
      - socket_volume:/socket:rw
    restart: always

volumes:
  socket_volume:
